## 数据链路层习题

3-01 数据链路与链路有何区别？“电路接通了”与“数据链路接通了”的区别何在？

所谓链路就是从一个结点到另一个结点的一段物理线路。而中间没有其他的任何交换结点。在进行数据通信的时候，两个计算机之间的通信路径要经过许多这样的链路。

当需要在一条链路上传送数据的时候，除了必须有一条物理线路外，还必须要有一些必要的通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成可数据链路。

3-02 数据链路层中的链路控制包括安歇功能？试讨论把数据链路层做成可靠的链路层有哪些优点和缺点。

链路控制包括：封装成帧；透明传输；差错检测。

如果把数据链路层做成可靠的链路层，就表示从源主机到目的主机的整个通信路径中的每一段链路都是可靠的。这样做的优点是如果在传输过程某个结点中发生了差错，可以及时的通过数据链路重传纠正这个错误；如果数据链路层做成不可靠的，那么当网路中的某个结点发现收到的帧有错误的的时候，就仅仅丢弃该帧，而并不通知发送结点重传出现差错的帧。只有当主机的高层协议(例如TCP协议)发现了这个错误时，才会出现源主机重传出现错误的帧。但这时候就比较晚了，可能要重传较多的数据。对网络资源有些浪费。

但是，如果高层协议使用的是不可靠的传输协议UDP，UDP并不要求重传有差错的数据，在这某些情况下，并不会带来风多的好处(例如实时语音视频通话)增加了可靠性，牺牲了实时性反而是不合适的。

3-03 网络适配器的作用是什么？网络适配器工作在哪一层？

适配器又叫网卡，适配器和局域网之间通过电缆或者双绞线以串行传输方式进行，而适配器与计算机主板上的IO之间以并行方式传输数据。因此适配器的一个重要功能就是进行数据串行与并行之间的转化。初始之外，适配器还有能够实现以太网协议。适配器在接收和发送各种数据帧的时候并不会通知计算机，如果收到帧是有差错的帧，就直接丢弃也不会通知计算机，只有当收到正确的帧才会使用中断通知计算机处理。

3-04 数据链路层的三个基本问题(封装成帧，透明传输，差错检测)为什么必须要解决？

封装成帧是在一段数据的前后分别加上首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别出帧的开始和结束。

透明传输指的是上层交来的数据，不管是什么形式的比特组合，都必须能够正确的传送。由于帧的开始和结束标记是使用专门指明的控制字符。因此在传送的数据中的任何比特组合一定不允许出现镇定姐夫的控制字符，否则会引起帧定界错误。

如果数据链路层没有出现差错检测，那么当目的主机收到其他主机发送过来的数据帧的时候，在交给上层应用后，如果上层应用的数据必须确保正确无误。如果发现数据有误，就可以请求目的主机重传这些数据。这样做就可以达到正确接收数据的目的。但这种工作方式有一个很大的缺点，就是在一些传输过程中出现了错误的数据，如果链路层有差错检测的功能，就可以直接把这个有差错的帧丢弃掉。以后并不会传送了。否则这个帧还要在网络上到处传送。

3-05 如果在数据链路层不进行封装成帧，会发生什么问题？

如过在数据链路层不进行封装成帧，那么数据链路层在收到一些数据后，就无法知道对方传送的数据中哪些是数据，哪些是控制信息，甚至数据中有没有差错都不清楚(因为无法进行帧差错检测)。数据链路层也不知道数据传送结束了没有，因此并不知道应当在什么时候把首都奥的数据交给上一层。

3-06 PPP协议的主要特点是什么？为什么PPP不使用帧编号？PPP适用于什么情况？为什么PPP协议不能使数据链路层实现可靠传输？

1. 简单PPP协议很简单，接收方每收到一个帧，就进行CRC循环检验，如果CRC检验正确，就收下这个帧，反之就丢弃这个帧。
2. 封装成帧：PPP协议规定了特殊的字符作为帧定界符号，以便使得接收端能从收到的比特流中准确的找出帧开始和结束位置。
3. 透明性：PPP协议能够保证数据传输的透明性，如果在数据中出现了和帧定界符一样的比特组合，PPP协议规定了一系列措施来决解这个问题。
4. 支持多种网络层协议：PPP协议支持多种网络层协议在同一条链路上的运行。当点对点链路所连接的是局域网或者路由器时，PPP协议就必须能够同时支持在链路所连接的局域网或者路由器上运行的各种网络层协议。
5. 支持多种类型链路：PPP能够在多种类型的链路上运行。例如串行的(一次性只发送一个比特)或并行的(一次性并行的发送多个比特)，同步或者异步，低速或者高速的，点对点链路。

PPP不适用帧编号，因为帧编号是为了出错时可以有效地重传，而PPP并不需要实现可靠传输。

PPP协议是用于线路质量不太差的情况下，如果通信质量太差，传输会频频出错，但PPP又没有百年好和确认机制，这样就必须依靠上层的协议才能保证数据传输的正确无误，这样就使得数据的传输效率降低。

3-07 要发送的数据为1101011011。采用CRC的申城多项式是P(X)=$X^4$+X+1。是应添加在后买你的余数。数据在传输过程中最后一位1变成0，问接收端能够发现？若数据在传送过程中最后两个1都变成了0，问接收端能够发现？采用CRC检验后，数据链路层的传输是否成为了可靠的传输？

解：采用CRC的生成多项式P(X)=$X^4$+X+1,除数用二进制表示是P=10011，现在除数是5位。因此需要把被除数1101011011后面加4个0(除数最高次为4)，然后进行**模2运算**：

计算出余数R为1110，即FCS为1110。

现在数据在传输过程中最后一个1变为了0，即1101011010，然后把帧检验序列1110接在数据110111010的后面，下一步就是进行CRC检验：

得出余数为0011不为0，因此判定所接受的数据有差错。CRC校验可以检测到这个差错。

若在数据的传输过程中最后两个1都变为了0，即1101011000，把真检验序列1110加到1101011000后面，进行CRC检验：

现在余数R为0101不为0，因此可以判断所接受的数据有差错。

采用CRC检验后，数据链轮层的传输并非成为了可靠的传输，当接收方进行CRC检验的时候，如果发现有差错，就丢弃该帧。数据链路层并不能保证接收方手段的和发送的完全一样。

3-08 要发送的数据为101110.采用CRC的生成多项式P(X)=$X^3$+1,试求应添加在后面的余数。

解：CRC的生成多项式为P(X)=$X^3+1$，因此使用二进制表示的除数为P=1001，要发送的数据后面添加3个0，余数应该为3位。进行CRC运算：

得到的余数R为011。

3-09 一个PPP帧的数据部分(用16禁止写出)是7D 5E FE 27 7D 5D 7D 5D 65 7D 5E，试问真正的数据是什么？

解：把由转义字符7D开始的2字节序列用下划线标出：

把原来的7D 5E转义为7E，把原来的7D 5D转为7D，因此真正的数据部分为：7E FE 27 7D 7D 65 7E

3-10 PPP协议使用同步传输技术传送比特串0110 1111 1111 1100，试经过0比特填充后百年城怎样的比特串?若接收端收到的的PPP帧的数据部分是0001 1101 1111 0111 1101 10，问删除发送端加入的0比特后变成怎样的比特串？

解析：第一个比特串0110 1111 1111 1100，0比特填充就是在连续5个1后面必须插入一个0.经过0比特填充后就变成了
0110 1111 1(0)11 111(0) 00 加括号的0是填充的。
另一个比特串为0001 1101 1111 0111 1101 10:删除发送端加入的0比特(5个连续1后面的第一个0删掉)，变为0001 1101 1111-1111 1-110(-表示删除了0)

3-11 是分别讨论下列各种情况在什么条件下是透明传输，在什么条件下不是透明传输。

1. 普通的电话服务。
2. 互联网提供的电子邮件服务

解：由于电话系统的带宽有限，而且还失真，普通的电话通信并不是透明传输。
电子邮件是透明传输。

